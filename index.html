<!DOCTYPE html>
<html lang="ms" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Kejohanan Olahraga SK Mapan-Mapan ke-18 (2025)</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --aki-antanom: #FFD700;
            --rentap: #28A745;
            --mat-salleh: #007BFF;
            --hang-tuah: #DC3545;
            --gold: #FFD700;
            --silver: #C0C0C0;
            --bronze: #CD7F32;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            padding-top: 56px;
            transition: all 0.3s ease;
            position: relative;
            color: #333;
        }
        
        /* Stadium Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://images.unsplash.com/photo-1461896836934-ffe607ba8211?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            opacity: 0.12;
            z-index: -2;
        }
        
        /* Overlay untuk meningkatkan kebolehbacaan */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(248, 249, 250, 0.9) 0%, rgba(233, 236, 239, 0.85) 100%);
            z-index: -1;
        }
        
        body.dark-mode::after {
            background: linear-gradient(135deg, rgba(18, 18, 18, 0.92) 0%, rgba(45, 45, 45, 0.88) 100%);
            color: #f8f9fa;
        }
        
        .navbar {
            backdrop-filter: blur(10px);
            background-color: rgba(255, 255, 255, 0.95) !important;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
        }
        
        .dark-mode .navbar {
            background-color: rgba(33, 37, 41, 0.95) !important;
        }
        
        .navbar-brand {
            font-weight: bold;
            font-size: 1.5rem;
            background: linear-gradient(90deg, #007BFF, #28A745);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .dark-mode .navbar-brand {
            background: linear-gradient(90deg, #6ea8fe, #75b798);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .logo-icon {
            color: #007BFF;
            margin-right: 8px;
        }
        
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transition: transform 0.4s, box-shadow 0.4s;
            margin-bottom: 25px;
            overflow: hidden;
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(5px);
        }
        
        .dark-mode .card {
            background-color: rgba(45, 45, 45, 0.95);
            color: #f8f9fa;
        }
        
        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }
        
        .medal-card {
            cursor: pointer;
            padding: 10px;
            border-radius: 10px;
            transition: all 0.3s;
        }
        
        .medal-card:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }
        
        .dark-mode .medal-card:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .medal-card:hover .medal-icon {
            transform: scale(1.3) rotate(10deg);
            filter: drop-shadow(0 0 8px currentColor);
        }
        
        .medal-icon {
            font-size: 2.8rem;
            transition: transform 0.4s, filter 0.4s;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
        }
        
        .gold { color: var(--gold); }
        .silver { color: var(--silver); }
        .bronze { color: var(--bronze); }
        
        .team-aki { border-top: 5px solid var(--aki-antanom); }
        .team-rentap { border-top: 5px solid var(--rentap); }
        .team-mat-salleh { border-top: 5px solid var(--mat-salleh); }
        .team-hang-tuah { border-top: 5px solid var(--hang-tuah); }
        
        .team-badge {
            padding: 6px 15px;
            border-radius: 25px;
            color: white;
            font-weight: bold;
            font-size: 0.85rem;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
            display: inline-block;
        }
        
        .aki-badge { 
            background: linear-gradient(135deg, var(--aki-antanom), #ffed4e);
            color: #333;
        }
        .rentap-badge { 
            background: linear-gradient(135deg, var(--rentap), #34ce57);
        }
        .mat-salleh-badge { 
            background: linear-gradient(135deg, var(--mat-salleh), #339af0);
        }
        .hang-tuah-badge { 
            background: linear-gradient(135deg, var(--hang-tuah), #e6494d);
        }
        
        .champion-card {
            animation: pulse 2.5s infinite;
            border: 3px solid var(--gold);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 215, 0, 0.05));
        }
        
        @keyframes pulse {
            0% { 
                box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
                transform: scale(1);
            }
            50% { 
                box-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
                transform: scale(1.02);
            }
            100% { 
                box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
                transform: scale(1);
            }
        }
        
        .table-hover tbody tr:hover {
            background-color: rgba(0, 123, 255, 0.1);
            transform: scale(1.005);
            transition: all 0.2s;
        }
        
        .dark-mode .table {
            color: #f8f9fa;
        }
        
        .dark-mode .table-hover tbody tr:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .search-box {
            position: relative;
        }
        
        .search-icon {
            position: absolute;
            top: 50%;
            left: 15px;
            transform: translateY(-50%);
            color: #6c757d;
        }
        
        .search-input {
            padding-left: 40px;
            border-radius: 25px;
            border: 2px solid #e9ecef;
        }
        
        .search-input:focus {
            border-color: #007BFF;
            box-shadow: 0 0 0 0.25rem rgba(0, 123, 255, 0.25);
        }
        
        .nav-tabs .nav-link {
            font-weight: 500;
            border-radius: 10px 10px 0 0;
        }
        
        .chart-container {
            position: relative;
            height: 320px;
            margin-bottom: 20px;
        }
        
        .admin-section {
            background: linear-gradient(135deg, rgba(0, 123, 255, 0.08), rgba(40, 167, 69, 0.05));
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            border: 1px solid rgba(0, 123, 255, 0.1);
        }
        
        .dark-mode .admin-section {
            background: linear-gradient(135deg, rgba(0, 123, 255, 0.15), rgba(40, 167, 69, 0.1));
            border-color: rgba(255, 255, 255, 0.1);
        }
        
        .event-type-badge {
            background: linear-gradient(135deg, #6f42c1, #a370f7);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: bold;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
        }
        
        .event-filter {
            margin-bottom: 25px;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .dark-mode .event-filter {
            background-color: rgba(45, 45, 45, 0.8);
        }
        
        .event-filter button.active {
            font-weight: bold;
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        }
        
        .footer {
            margin-top: 50px;
            padding: 25px 0;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
        }
        
        .dark-mode .footer {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            background-color: rgba(33, 37, 41, 0.9);
        }
        
        .sport-icon {
            font-size: 1.5rem;
            margin-right: 10px;
            color: #007BFF;
        }
        
        .dark-mode .sport-icon {
            color: #6ea8fe;
        }
        
        .highlight-number {
            font-size: 2.2rem;
            font-weight: bold;
            background: linear-gradient(90deg, #007BFF, #28A745);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .dark-mode .highlight-number {
            background: linear-gradient(90deg, #6ea8fe, #75b798);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .section-title {
            position: relative;
            padding-bottom: 15px;
            margin-bottom: 30px;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 4px;
            background: linear-gradient(90deg, #007BFF, #28A745);
            border-radius: 2px;
        }
        
        .modal-content {
            border-radius: 15px;
            overflow: hidden;
            border: none;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }
        
        .dark-mode .modal-content {
            background-color: #2d2d2d;
            color: #f8f9fa;
        }
        
        /* Animasi untuk loading */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.6s ease-out forwards;
        }
        
        /* Highlight juara pingat emas */
        .gold-champion {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 215, 0, 0.05));
            border-left: 5px solid var(--gold);
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="bi bi-trophy-fill logo-icon"></i>
                Kejohanan Olahraga SK Mapan-Mapan ke-18
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#dashboard">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#events">Acara</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#champions">Olahragawan/Olahragawati</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#parade">Perbarisan</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#admin">Admin</a>
                    </li>
                    <li class="nav-item ms-2">
                        <button class="btn btn-outline-primary" id="darkModeToggle">
                            <i class="bi bi-moon"></i> Mode Gelap
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-4 fade-in">
        <!-- Dashboard -->
        <section id="dashboard" class="mb-5">
            <div class="row mb-4">
                <div class="col-12">
                    <h2 class="section-title">Dashboard Kejohanan</h2>
                    <p class="lead">Paparan statistik dan analisis untuk Kejohanan Olahraga SK Mapan-Mapan kali ke-18 Tahun 2025</p>
                </div>
            </div>
            
            <!-- Medals Summary -->
            <div class="row mb-5">
                <div class="col-12">
                    <h4 class="mb-3"><i class="bi bi-award sport-icon"></i>Statistik Pingat</h4>
                </div>
                
                <!-- Aki Antanom -->
                <div class="col-md-3 col-sm-6 mb-4">
                    <div class="card team-aki h-100">
                        <div class="card-body">
                            <h5 class="card-title d-flex align-items-center">
                                <span class="team-badge aki-badge me-2">AKI ANTANOM</span>
                            </h5>
                            <div class="d-flex justify-content-around my-4">
                                <div class="text-center medal-card" data-team="aki" data-medal="gold">
                                    <i class="bi bi-award-fill medal-icon gold"></i>
                                    <div class="highlight-number" id="aki-gold">3</div>
                                    <div>Emas</div>
                                </div>
                                <div class="text-center medal-card" data-team="aki" data-medal="silver">
                                    <i class="bi bi-award-fill medal-icon silver"></i>
                                    <div class="highlight-number" id="aki-silver">8</div>
                                    <div>Perak</div>
                                </div>
                                <div class="text-center medal-card" data-team="aki" data-medal="bronze">
                                    <i class="bi bi-award-fill medal-icon bronze"></i>
                                    <div class="highlight-number" id="aki-bronze">7</div>
                                    <div>Gangsa</div>
                                </div>
                            </div>
                            <div class="text-center mt-3">
                                <span class="badge bg-warning text-dark fs-5 px-4 py-2">Jumlah: <span id="aki-total">18</span></span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Rentap -->
                <div class="col-md-3 col-sm-6 mb-4">
                    <div class="card team-rentap h-100 gold-champion">
                        <div class="card-body">
                            <h5 class="card-title d-flex align-items-center">
                                <span class="team-badge rentap-badge me-2">RENTAP</span>
                                <span class="badge bg-warning text-dark ms-2">Juara Emas</span>
                            </h5>
                            <div class="d-flex justify-content-around my-4">
                                <div class="text-center medal-card" data-team="rentap" data-medal="gold">
                                    <i class="bi bi-award-fill medal-icon gold"></i>
                                    <div class="highlight-number" id="rentap-gold">7</div>
                                    <div>Emas</div>
                                </div>
                                <div class="text-center medal-card" data-team="rentap" data-medal="silver">
                                    <i class="bi bi-award-fill medal-icon silver"></i>
                                    <div class="highlight-number" id="rentap-silver">0</div>
                                    <div>Perak</div>
                                </div>
                                <div class="text-center medal-card" data-team="rentap" data-medal="bronze">
                                    <i class="bi bi-award-fill medal-icon bronze"></i>
                                    <div class="highlight-number" id="rentap-bronze">2</div>
                                    <div>Gangsa</div>
                                </div>
                            </div>
                            <div class="text-center mt-3">
                                <span class="badge bg-success fs-5 px-4 py-2">Jumlah: <span id="rentap-total">9</span></span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Mat Salleh -->
                <div class="col-md-3 col-sm-6 mb-4">
                    <div class="card team-mat-salleh h-100">
                        <div class="card-body">
                            <h5 class="card-title d-flex align-items-center">
                                <span class="team-badge mat-salleh-badge me-2">MAT SALLEH</span>
                            </h5>
                            <div class="d-flex justify-content-around my-4">
                                <div class="text-center medal-card" data-team="mat-salleh" data-medal="gold">
                                    <i class="bi bi-award-fill medal-icon gold"></i>
                                    <div class="highlight-number" id="mat-salleh-gold">4</div>
                                    <div>Emas</div>
                                </div>
                                <div class="text-center medal-card" data-team="mat-salleh" data-medal="silver">
                                    <i class="bi bi-award-fill medal-icon silver"></i>
                                    <div class="highlight-number" id="mat-salleh-silver">4</div>
                                    <div>Perak</div>
                                </div>
                                <div class="text-center medal-card" data-team="mat-salleh" data-medal="bronze">
                                    <i class="bi bi-award-fill medal-icon bronze"></i>
                                    <div class="highlight-number" id="mat-salleh-bronze">4</div>
                                    <div>Gangsa</div>
                                </div>
                            </div>
                            <div class="text-center mt-3">
                                <span class="badge bg-primary fs-5 px-4 py-2">Jumlah: <span id="mat-salleh-total">12</span></span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Hang Tuah -->
                <div class="col-md-3 col-sm-6 mb-4">
                    <div class="card team-hang-tuah h-100">
                        <div class="card-body">
                            <h5 class="card-title d-flex align-items-center">
                                <span class="team-badge hang-tuah-badge me-2">HANG TUAH</span>
                            </h5>
                            <div class="d-flex justify-content-around my-4">
                                <div class="text-center medal-card" data-team="hang-tuah" data-medal="gold">
                                    <i class="bi bi-award-fill medal-icon gold"></i>
                                    <div class="highlight-number" id="hang-tuah-gold">2</div>
                                    <div>Emas</div>
                                </div>
                                <div class="text-center medal-card" data-team="hang-tuah" data-medal="silver">
                                    <i class="bi bi-award-fill medal-icon silver"></i>
                                    <div class="highlight-number" id="hang-tuah-silver">4</div>
                                    <div>Perak</div>
                                </div>
                                <div class="text-center medal-card" data-team="hang-tuah" data-medal="bronze">
                                    <i class="bi bi-award-fill medal-icon bronze"></i>
                                    <div class="highlight-number" id="hang-tuah-bronze">3</div>
                                    <div>Gangsa</div>
                                </div>
                            </div>
                            <div class="text-center mt-3">
                                <span class="badge bg-danger fs-5 px-4 py-2">Jumlah: <span id="hang-tuah-total">9</span></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Charts -->
            <div class="row mb-5">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title"><i class="bi bi-bar-chart-fill sport-icon"></i>Pungutan Pingat Emas</h5>
                            <div class="chart-container">
                                <canvas id="goldChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title"><i class="bi bi-pie-chart-fill sport-icon"></i>Perbandingan Keseluruhan Pingat</h5>
                            <div class="chart-container">
                                <canvas id="medalChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Champion Team -->
            <div class="row">
                <div class="col-12">
                    <div class="card champion-card">
                        <div class="card-body text-center py-5">
                            <h3><i class="bi bi-trophy-fill gold me-2"></i> JUARA KESELURUHAN</h3>
                            <h2 class="display-4 my-3 fw-bold">RENTAP</h2>
                            <p class="lead fs-4">Dengan 7 pingat Emas - Juara Terbanyak Emas!</p>
                            <div class="d-flex justify-content-center mt-4">
                                <span class="team-badge rentap-badge fs-5 px-5 py-3">Pasukan Hijau</span>
                            </div>
                            <div class="mt-4">
                                <p class="text-muted">Pasukan Rentap telah menunjukkan prestasi cemerlang dengan memenangi 7 pingat Emas!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Events Section -->
        <section id="events" class="mb-5">
            <div class="row mb-4">
                <div class="col-12">
                    <h2 class="section-title">Senarai Acara & Pemenang</h2>
                    <div class="event-filter">
                        <div class="d-flex flex-wrap gap-2">
                            <div class="btn-group" role="group">
                                <button type="button" class="btn btn-outline-primary active" data-filter="all">Semua Acara</button>
                                <button type="button" class="btn btn-outline-primary" data-filter="track">Balapan</button>
                                <button type="button" class="btn btn-outline-primary" data-filter="field">Padang</button>
                            </div>
                            <div class="btn-group" role="group">
                                <button type="button" class="btn btn-outline-success active" data-gender="all">Semua</button>
                                <button type="button" class="btn btn-outline-success" data-gender="male">Lelaki</button>
                                <button type="button" class="btn btn-outline-success" data-gender="female">Perempuan</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Events will be loaded here by JavaScript -->
            <div id="events-container" class="row">
                <!-- Events will be dynamically loaded here -->
            </div>
        </section>
        
        <!-- Olahragawan & Olahragawati -->
        <section id="champions" class="mb-5">
            <div class="row mb-4">
                <div class="col-12">
                    <h2 class="section-title">Olahragawan & Olahragawati</h2>
                    <p class="lead">Ditetapkan berdasarkan sistem mata: Emas (5 mata), Perak (3 mata), Gangsa (1 mata)</p>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6 mb-4">
                    <div class="card champion-card">
                        <div class="card-body text-center py-5">
                            <h3><i class="bi bi-person-fill gold me-2"></i> OLAHRAGAWAN 2025</h3>
                            <h2 class="display-5 my-3 fw-bold">MUHAMMAD SHAFIQ FARHAN BIN DALSAH</h2>
                            <div class="mb-4">
                                <span class="team-badge rentap-badge fs-5">RENTAP</span>
                            </div>
                            <div class="d-flex justify-content-center my-4">
                                <div class="mx-4">
                                    <i class="bi bi-award-fill gold fs-2"></i>
                                    <div class="fs-4 fw-bold">2 Emas</div>
                                </div>
                                <div class="mx-4">
                                    <i class="bi bi-star-fill text-warning fs-2"></i>
                                    <div class="fs-4 fw-bold">10 Mata</div>
                                </div>
                            </div>
                            <p class="fs-5">Jumlah Mata: <span class="fw-bold highlight-number">10</span></p>
                            <p class="text-muted">Acara: 100m Lelaki 12TKB, 200m Lelaki 12TKB</p>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6 mb-4">
                    <div class="card champion-card">
                        <div class="card-body text-center py-5">
                            <h3><i class="bi bi-person-fill gold me-2"></i> OLAHRAGAWATI 2025</h3>
                            <h2 class="display-5 my-3 fw-bold">SITTY NUR ASYIRAH BINTI ROSLI</h2>
                            <div class="mb-4">
                                <span class="team-badge aki-badge fs-5">AKI ANTANOM</span>
                            </div>
                            <div class="d-flex justify-content-center my-4">
                                <div class="mx-4">
                                    <i class="bi bi-award-fill gold fs-2"></i>
                                    <div class="fs-4 fw-bold">2 Emas</div>
                                </div>
                                <div class="mx-4">
                                    <i class="bi bi-star-fill text-warning fs-2"></i>
                                    <div class="fs-4 fw-bold">10 Mata</div>
                                </div>
                            </div>
                            <p class="fs-5">Jumlah Mata: <span class="fw-bold highlight-number">10</span></p>
                            <p class="text-muted">Acara: 100m Perempuan 12TKB, Lompat Tinggi Perempuan 12TKB</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Top Scorers Table -->
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title"><i class="bi bi-list-ol sport-icon"></i>Peringkat Peserta Teratas</h5>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>#</th>
                                            <th>Nama Peserta</th>
                                            <th>Jantina</th>
                                            <th>Pasukan</th>
                                            <th>Emas</th>
                                            <th>Perak</th>
                                            <th>Gangsa</th>
                                            <th>Jumlah Mata</th>
                                        </tr>
                                    </thead>
                                    <tbody id="top-scorers-table">
                                        <!-- Top scorers will be loaded here by JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Parade Results -->
        <section id="parade" class="mb-5">
            <div class="row mb-4">
                <div class="col-12">
                    <h2 class="section-title">Keputusan Pertandingan Perbarisan</h2>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-8 offset-md-2">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title text-center"><i class="bi bi-flag-fill sport-icon"></i>Keputusan Perbarisan Antara Rumah Sukan</h5>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead class="table-primary">
                                        <tr>
                                            <th>Kedudukan</th>
                                            <th>Rumah Sukan</th>
                                            <th>Hakim 1</th>
                                            <th>Hakim 2</th>
                                            <th>Hakim 3</th>
                                            <th>Purata</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><span class="badge bg-primary fs-5 px-3 py-2">1</span></td>
                                            <td><span class="team-badge mat-salleh-badge">MAT SALLEH</span></td>
                                            <td>91</td>
                                            <td>75</td>
                                            <td>82</td>
                                            <td><strong class="fs-5">82%</strong></td>
                                        </tr>
                                        <tr>
                                            <td><span class="badge bg-danger fs-5 px-3 py-2">2</span></td>
                                            <td><span class="team-badge hang-tuah-badge">HANG TUAH</span></td>
                                            <td>89</td>
                                            <td>57</td>
                                            <td>87</td>
                                            <td><strong class="fs-5">78%</strong></td>
                                        </tr>
                                        <tr>
                                            <td><span class="badge bg-warning text-dark fs-5 px-3 py-2">3</span></td>
                                            <td><span class="team-badge aki-badge">AKI ANTANOM</span></td>
                                            <td>89</td>
                                            <td>64</td>
                                            <td>79</td>
                                            <td><strong class="fs-5">77%</strong></td>
                                        </tr>
                                        <tr>
                                            <td><span class="badge bg-success fs-5 px-3 py-2">4</span></td>
                                            <td><span class="team-badge rentap-badge">RENTAP</span></td>
                                            <td>92</td>
                                            <td>54</td>
                                            <td>78</td>
                                            <td><strong class="fs-5">74%</strong></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="alert alert-info mt-3">
                                <i class="bi bi-info-circle me-2"></i>
                                Keputusan perbarisan tidak dikira dalam pungutan pingat keseluruhan kejohanan.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Admin Section -->
        <section id="admin" class="mb-5">
            <div class="row mb-4">
                <div class="col-12">
                    <h2 class="section-title">Panel Admin</h2>
                </div>
            </div>
            
            <div class="admin-section">
                <div class="row">
                    <div class="col-md-6 mb-4">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title"><i class="bi bi-search sport-icon"></i>Carian Peserta/Acara</h5>
                                <div class="search-box mb-4">
                                    <i class="bi bi-search search-icon"></i>
                                    <input type="text" class="form-control search-input" id="searchInput" placeholder="Cari nama peserta, acara atau pasukan...">
                                </div>
                                <button class="btn btn-primary w-100 py-3" id="searchButton">
                                    <i class="bi bi-search me-2"></i>Cari
                                </button>
                                
                                <div id="searchResults" class="mt-4" style="display: none;">
                                    <h6>Hasil Carian:</h6>
                                    <div class="list-group" id="resultsList">
                                        <!-- Search results will appear here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6 mb-4">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title"><i class="bi bi-pencil-square sport-icon"></i>Kemaskini Acara</h5>
                                <p class="text-muted">Fungsi untuk mengemaskini maklumat acara yang belum selesai atau kesilapan data.</p>
                                
                                <div class="mb-3">
                                    <label for="updateEvent" class="form-label">Pilih Acara untuk Dikemaskini</label>
                                    <select class="form-select" id="updateEvent">
                                        <option selected disabled>Pilih acara...</option>
                                        <option>4 X 50 METER CAMPURAN PRASEKOLAH</option>
                                        <option>4 X 200 METER CAMPURAN 9TKB</option>
                                        <option>4 X 200 METER LELAKI 12TKB</option>
                                        <option>4 X 200 METER PEREMPUAN 12TKB</option>
                                        <option>Lain-lain (tambah manual)</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="participantName" class="form-label">Nama Peserta</label>
                                    <input type="text" class="form-control" id="participantName" placeholder="Masukkan nama peserta">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="participantResult" class="form-label">Masa/Jarak</label>
                                    <input type="text" class="form-control" id="participantResult" placeholder="Contoh: 15.45s atau 3.60m">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="participantPosition" class="form-label">Kedudukan</label>
                                    <select class="form-select" id="participantPosition">
                                        <option value="1">1 (Emas)</option>
                                        <option value="2">2 (Perak)</option>
                                        <option value="3">3 (Gangsa)</option>
                                        <option value="4">4</option>
                                    </select>
                                </div>
                                
                                <button class="btn btn-success w-100 py-3" id="updateButton">
                                    <i class="bi bi-check-circle me-2"></i>Kemaskini Acara
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Footer -->
        <footer class="footer text-center">
            <div class="container">
                <h5 class="mb-3">Sistem Kejohanan Olahraga SK Mapan-Mapan ke-18 (2025)</h5>
                <p class="text-muted mb-3">Dibangunkan dengan Bootstrap 5 & Chart.js | Semua data adalah rasmi</p>
                <div class="mt-3 mb-3">
                    <span class="me-3"><i class="bi bi-award-fill gold"></i> Emas</span>
                    <span class="me-3"><i class="bi bi-award-fill silver"></i> Perak</span>
                    <span><i class="bi bi-award-fill bronze"></i> Gangsa</span>
                </div>
                <p class="small">Â© 2025 SK Mapan-Mapan, Pitas. Hak Cipta Terpelihara.</p>
            </div>
        </footer>
    </div>

    <!-- Modal for Medal Winners -->
    <div class="modal fade" id="winnersModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalTitle">Pemenang Pingat</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="modalContent">
                        <!-- Content will be loaded here -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Data from the PDF files
        const eventsData = {
            track: [
                {
                    id: 1,
                    name: "50 METER LELAKI PRASEKOLAH",
                    gender: "male",
                    participants: [
                        { name: "MUHAMMAD REZZA ZAKWAN BIN ABDULLAH", result: "14.62", position: 1, team: "unknown" },
                        { name: "MOHAMMAD AFIQ AMANI BIN GABAN", result: "14.75", position: 2, team: "unknown" },
                        { name: "MOHAMMAD QAISER BIN BERUSLI", result: "15.31", position: 3, team: "unknown" },
                        { name: "DANIEL BIN JULMAN", result: "15.50", position: 4, team: "unknown" }
                    ]
                },
                {
                    id: 2,
                    name: "50 METER PEREMPUAN PRASEKOLAH",
                    gender: "female",
                    participants: [
                        { name: "NUR HAYANA BINTI HARDY", result: "16.31", position: 1, team: "unknown" },
                        { name: "FIDASARI LU BINTI MOHAMMAD RIAN", result: "17.15", position: 2, team: "unknown" },
                        { name: "NUR ELISYA SAFIYA BINTI NUSRI", result: "17.43", position: 3, team: "unknown" },
                        { name: "SYIFA NUR UWAIDAH BINTI ANDIKA", result: "19.47", position: 4, team: "unknown" }
                    ]
                },
                {
                    id: 3,
                    name: "100 METER LELAKI 9TKB",
                    gender: "male",
                    participants: [
                        { name: "DANISH BIN JEFRI", result: "16.72", position: 1, team: "rentap" },
                        { name: "MOHAMMAD FIRMAN NAIM BIN MOHAMMAD RIAN", result: "16.94", position: 2, team: "aki" },
                        { name: "MUHD AL MALIK BIN MOHD KAHIRUL", result: "18.25", position: 3, team: "rentap" },
                        { name: "ABD ADH HAKIM BIN ABDULLAH", result: "18.37", position: 4, team: "hang-tuah" }
                    ]
                },
                {
                    id: 4,
                    name: "100 METER PEREMPUAN 9TKB",
                    gender: "female",
                    participants: [
                        { name: "NURERYANI SUFI BINTI ABDULLAH", result: "18.53", position: 1, team: "mat-salleh" },
                        { name: "NUR QISYATUL QHAYRRA ZANIA BINTI ZAKARIA", result: "18.78", position: 2, team: "aki" },
                        { name: "NORASLEYANNAH BINTI ABDULLAH", result: "19.19", position: 3, team: "aki" },
                        { name: "NUR MIA ADRIANA BINTI AMRAN", result: "20.75", position: 4, team: "rentap" }
                    ]
                },
                {
                    id: 5,
                    name: "100 METER LELAKI 12TKB",
                    gender: "male",
                    participants: [
                        { name: "MOHAMMAD SHAFIQ FARHAN BIN DALSAH", result: "16.00", position: 1, team: "rentap" },
                        { name: "MOHAMAD FIRDAUS BIN MOHAMMAD RIAN", result: "16.10", position: 2, team: "aki" },
                        { name: "SAIFUL AZAM BIN ABDULLAH", result: "16.14", position: 3, team: "mat-salleh" },
                        { name: "MOHAMAD SYAFIQ BIN SATRIA", result: "16.50", position: 4, team: "mat-salleh" }
                    ]
                },
                {
                    id: 6,
                    name: "100 METER PEREMPUAN 12TKB",
                    gender: "female",
                    participants: [
                        { name: "SITTY NUR ASYIRAH BINTI ROSLI", result: "16.62", position: 1, team: "aki" },
                        { name: "SITTI NUR QIANA UMAIRAH BINTI MAHAD", result: "16.67", position: 2, team: "hang-tuah" },
                        { name: "NUR FAIEISYA FIETIEYA BINTI ABDULLAH", result: "17.94", position: 3, team: "mat-salleh" },
                        { name: "ANGIE CRYSTAL JIMMY", result: "19.28", position: 4, team: "hang-tuah" }
                    ]
                },
                {
                    id: 7,
                    name: "200 METER LELAKI 12TKB",
                    gender: "male",
                    participants: [
                        { name: "MUHAMMAD SHAFIQ FARHAN BIN DALSAH", result: "35.47", position: 1, team: "rentap" },
                        { name: "MOHAMMAD ALFAH BIN ABDULLAH", result: "36.19", position: 2, team: "aki" },
                        { name: "SAIFUL AZAM BIN ABDULLAH", result: "36.91", position: 3, team: "mat-salleh" },
                        { name: "MUHAMMAD EKWAL DON BIN ABDULLAH", result: "42.06", position: 4, team: "mat-salleh" }
                    ]
                },
                {
                    id: 8,
                    name: "200 METER PEREMPUAN 12TKB",
                    gender: "female",
                    participants: [
                        { name: "SITI NORHIDAYAH BINTI ABDULLAH", result: "39.06", position: 1, team: "rentap" },
                        { name: "ANGIE CRYSTAL JIMMY", result: "40.85", position: 2, team: "hang-tuah" },
                        { name: "NUR IZZQUEISHA AIN BINTI JAFNAR", result: "46.85", position: 3, team: "aki" },
                        { name: "NUR SHUHADA BINTI ABDULLAH", result: "52.97", position: 4, team: "mat-salleh" }
                    ]
                },
                {
                    id: 9,
                    name: "80 METER BERPAGAR LELAKI 12TKB",
                    gender: "male",
                    participants: [
                        { name: "MOHAMMAD HARFEY BIN HARDY", result: "16.41s", position: 1, team: "mat-salleh" },
                        { name: "MOHAMMAD ALFAH BIN ABDULLAH", result: "16.72", position: 2, team: "aki" },
                        { name: "DANIAL BIN ABDULLAH", result: "17.86", position: 3, team: "rentap" },
                        { name: "MOHAMMAD MUZAIDIL IDZHAM BIN MASRA", result: "17.89", position: 4, team: "rentap" }
                    ]
                },
                {
                    id: 10,
                    name: "80 METER BERPAGAR PEREMPUAN 12TKB",
                    gender: "female",
                    participants: [
                        { name: "SITI NORHIDAYAH BINTI ABDULLAH", result: "15.45", position: 1, team: "rentap" },
                        { name: "NUR ALEYA MAISARA BINTI AMRAN", result: "19.60", position: 2, team: "mat-salleh" },
                        { name: "NURSAZWANI BINTI LISMAN", result: "20.28", position: 3, team: "aki" },
                        { name: "REZELAYNE JUDIP", result: "20.97", position: 4, team: "rentap" }
                    ]
                },
                {
                    id: 11,
                    name: "4 X 100 METER LELAKI 12TKB",
                    gender: "male",
                    participants: [
                        { name: "MAT SALLEH Team", result: "1:08:87", position: 1, team: "mat-salleh" },
                        { name: "AKI ANTANOM Team", result: "1:10:50", position: 2, team: "aki" },
                        { name: "HANG TUAH Team", result: "1:12:07", position: 3, team: "hang-tuah" },
                        { name: "RENTAP Team", result: "1:12:60", position: 4, team: "rentap" }
                    ]
                },
                {
                    id: 12,
                    name: "4 X 100 METER PEREMPUAN 12TKB",
                    gender: "female",
                    participants: [
                        { name: "MAT SALLEH Team", result: "1:16:84", position: 1, team: "mat-salleh" },
                        { name: "AKI ANTANOM Team", result: "1:18:44", position: 2, team: "aki" },
                        { name: "HANG TUAH Team", result: "1:19:54", position: 3, team: "hang-tuah" },
                        { name: "RENTAP Team", result: "1:27:37", position: 4, team: "rentap" }
                    ]
                }
            ],
            field: [
                {
                    id: 13,
                    name: "LOMPAT JAUH LELAKI 12 TKB",
                    gender: "male",
                    participants: [
                        { name: "MOHD ROYY SHAFIEY", result: "3.60 M", position: 1, team: "rentap" },
                        { name: "MUHAMMAD EKWAL DON BIN ABDULLAH", result: "3.51 M", position: 2, team: "mat-salleh" },
                        { name: "MOHAMMAD RENDI BOY BIN ABDULLAH", result: "3.50 M", position: 3, team: "hang-tuah" },
                        { name: "MOHAMAD FIRDAUS BIN MOHAMMAD RIAN", result: "3.27 M", position: 4, team: "aki" }
                    ]
                },
                {
                    id: 14,
                    name: "LOMPAT JAUH PEREMPUAN 12TKB",
                    gender: "female",
                    participants: [
                        { name: "REZELAYNE JUDIP", result: "2.70 m", position: 1, team: "rentap" },
                        { name: "NUR QISYATUL QHAYRRA ZANIA BINTI ZAKARIA", result: "2.17 m", position: 2, team: "aki" },
                        { name: "NUR IZZQUEISHA AIN BINTI JAFNAR", result: "2.13 m", position: 3, team: "aki" }
                    ]
                },
                {
                    id: 15,
                    name: "LONTAR PELURU LELAKI 12TKB",
                    gender: "male",
                    participants: [
                        { name: "MOHAMAD AZMIR BIN INDAN", result: "5.03 m", position: 1, team: "hang-tuah" },
                        { name: "MUHAMMAD FURQAN AL FATIH BIN LURSAN", result: "4.50 m", position: 2, team: "hang-tuah" },
                        { name: "MOHAMMAD SHAHDIQAH BIN ABDULLAH", result: "4.29 m", position: 3, team: "aki" },
                        { name: "MOHD ROYY SHAFIE", result: "4.10 m", position: 4, team: "rentap" }
                    ]
                },
                {
                    id: 16,
                    name: "LONTAR PELURU PEREMPUAN 12TKB",
                    gender: "female",
                    participants: [
                        { name: "NURSAZWANI BINTI LISMAN", result: "5.65 M", position: 1, team: "aki" },
                        { name: "SITTI NUR QIANA UMAIRAH BINTI MAHADI", result: "5.64 M", position: 2, team: "hang-tuah" },
                        { name: "NORFASHA BINTI AMAN", result: "5.12 M", position: 3, team: "aki" },
                        { name: "ASMINI BINTI HAMID", result: "5.04 M", position: 4, team: "mat-salleh" }
                    ]
                },
                {
                    id: 17,
                    name: "LOMPAT TINGGI LELAKI 12TKB",
                    gender: "male",
                    participants: [
                        { name: "MOHAMMAD AMIRUL KHAIRUDIN BIN MOHD AZMI", result: "1.10 METER", position: 1, team: "hang-tuah" },
                        { name: "MOHAMMAD SUFI BIN SEDEDIN", result: "0.93 METER", position: 2, team: "mat-salleh" },
                        { name: "MOHAMMAD HARFEY BIN HARDY", result: "0.90 METER", position: 3, team: "mat-salleh" }
                    ]
                },
                {
                    id: 18,
                    name: "LOMPAT TINGGI PEREMPUAN 12TKB",
                    gender: "female",
                    participants: [
                        { name: "SITTY NUR ASYIRAH BINTI ROSLI", result: "1.10 METER", position: 1, team: "aki" },
                        { name: "NUR ALEYA MAISARA BINTI AMRAN", result: "0.90 METER", position: 2, team: "mat-salleh" },
                        { name: "NORFASHA BINTI AMAN", result: "0.85 METER", position: 3, team: "aki" }
                    ]
                }
            ]
        };

        // UPDATED Medal data for teams - Berdasarkan statistik yang diberikan
        const medalData = {
            "aki": { gold: 3, silver: 8, bronze: 7, total: 18 },
            "rentap": { gold: 7, silver: 0, bronze: 2, total: 9 },
            "mat-salleh": { gold: 4, silver: 4, bronze: 4, total: 12 },
            "hang-tuah": { gold: 2, silver: 4, bronze: 3, total: 9 }
        };

        // Top scorers data - Dikemaskini dengan SITTY NUR ASYIRAH BINTI ROSLI (2 emas)
        const topScorers = [
            { name: "MUHAMMAD SHAFIQ FARHAN BIN DALSAH", gender: "male", team: "rentap", gold: 2, silver: 0, bronze: 0, points: 10 },
            { name: "SITTY NUR ASYIRAH BINTI ROSLI", gender: "female", team: "aki", gold: 2, silver: 0, bronze: 0, points: 10 },
            { name: "SITI NORHIDAYAH BINTI ABDULLAH", gender: "female", team: "rentap", gold: 2, silver: 0, bronze: 0, points: 10 },
            { name: "REZELAYNE JUDIP", gender: "female", team: "rentap", gold: 1, silver: 0, bronze: 0, points: 5 },
            { name: "NURSAZWANI BINTI LISMAN", gender: "female", team: "aki", gold: 1, silver: 0, bronze: 0, points: 5 },
            { name: "MOHAMMAD HARFEY BIN HARDY", gender: "male", team: "mat-salleh", gold: 1, silver: 0, bronze: 0, points: 5 },
            { name: "MOHAMMAD AMIRUL KHAIRUDIN BIN MOHD AZMI", gender: "male", team: "hang-tuah", gold: 1, silver: 0, bronze: 0, points: 5 },
            { name: "MOHAMAD AZMIR BIN INDAN", gender: "male", team: "hang-tuah", gold: 1, silver: 0, bronze: 0, points: 5 },
            { name: "MOHD ROYY SHAFIEY", gender: "male", team: "rentap", gold: 1, silver: 0, bronze: 0, points: 5 },
            { name: "DANISH BIN JEFRI", gender: "male", team: "rentap", gold: 1, silver: 0, bronze: 0, points: 5 },
            { name: "MOHAMMAD ALFAH BIN ABDULLAH", gender: "male", team: "aki", gold: 0, silver: 2, bronze: 0, points: 6 },
            { name: "ANGIE CRYSTAL JIMMY", gender: "female", team: "hang-tuah", gold: 0, silver: 2, bronze: 0, points: 6 },
            { name: "NUR QISYATUL QHAYRRA ZANIA BINTI ZAKARIA", gender: "female", team: "aki", gold: 0, silver: 1, bronze: 0, points: 3 },
            { name: "SAIFUL AZAM BIN ABDULLAH", gender: "male", team: "mat-salleh", gold: 0, silver: 0, bronze: 2, points: 2 },
            { name: "NUR IZZQUEISHA AIN BINTI JAFNAR", gender: "female", team: "aki", gold: 0, silver: 0, bronze: 2, points: 2 }
        ];

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize charts
            initCharts();
            
            // Load events
            loadEvents('all', 'all');
            
            // Load top scorers table
            loadTopScorers();
            
            // Set up event listeners
            setupEventListeners();
            
            // Set up medal card click handlers
            setupMedalCardHandlers();
            
            // Initialize dark mode toggle
            initDarkMode();
            
            // Update medal counts display
            updateMedalCountsDisplay();
        });

        // Update medal counts display
        function updateMedalCountsDisplay() {
            // Update Aki Antanom
            document.getElementById('aki-gold').textContent = medalData.aki.gold;
            document.getElementById('aki-silver').textContent = medalData.aki.silver;
            document.getElementById('aki-bronze').textContent = medalData.aki.bronze;
            document.getElementById('aki-total').textContent = medalData.aki.total;
            
            // Update Rentap
            document.getElementById('rentap-gold').textContent = medalData.rentap.gold;
            document.getElementById('rentap-silver').textContent = medalData.rentap.silver;
            document.getElementById('rentap-bronze').textContent = medalData.rentap.bronze;
            document.getElementById('rentap-total').textContent = medalData.rentap.total;
            
            // Update Mat Salleh
            document.getElementById('mat-salleh-gold').textContent = medalData["mat-salleh"].gold;
            document.getElementById('mat-salleh-silver').textContent = medalData["mat-salleh"].silver;
            document.getElementById('mat-salleh-bronze').textContent = medalData["mat-salleh"].bronze;
            document.getElementById('mat-salleh-total').textContent = medalData["mat-salleh"].total;
            
            // Update Hang Tuah
            document.getElementById('hang-tuah-gold').textContent = medalData["hang-tuah"].gold;
            document.getElementById('hang-tuah-silver').textContent = medalData["hang-tuah"].silver;
            document.getElementById('hang-tuah-bronze').textContent = medalData["hang-tuah"].bronze;
            document.getElementById('hang-tuah-total').textContent = medalData["hang-tuah"].total;
        }

        // Initialize charts
        function initCharts() {
            // Gold Chart
            const goldCtx = document.getElementById('goldChart').getContext('2d');
            const goldChart = new Chart(goldCtx, {
                type: 'bar',
                data: {
                    labels: ['Rentap', 'Mat Salleh', 'Aki Antanom', 'Hang Tuah'],
                    datasets: [{
                        label: 'Pingat Emas',
                        data: [medalData.rentap.gold, medalData["mat-salleh"].gold, medalData.aki.gold, medalData["hang-tuah"].gold],
                        backgroundColor: [
                            'rgba(40, 167, 69, 0.8)',
                            'rgba(0, 123, 255, 0.8)',
                            'rgba(255, 215, 0, 0.8)',
                            'rgba(220, 53, 69, 0.8)'
                        ],
                        borderColor: [
                            'rgb(40, 167, 69)',
                            'rgb(0, 123, 255)',
                            'rgb(255, 215, 0)',
                            'rgb(220, 53, 69)'
                        ],
                        borderWidth: 2,
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `Emas: ${context.raw}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Bilangan Pingat Emas',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            },
                            ticks: {
                                font: {
                                    size: 12
                                }
                            }
                        },
                        x: {
                            ticks: {
                                font: {
                                    size: 12,
                                    weight: 'bold'
                                }
                            }
                        }
                    },
                    animation: {
                        duration: 2000,
                        easing: 'easeOutQuart'
                    }
                }
            });

            // Medal Distribution Chart
            const medalCtx = document.getElementById('medalChart').getContext('2d');
            const medalChart = new Chart(medalCtx, {
                type: 'pie',
                data: {
                    labels: ['Aki Antanom', 'Rentap', 'Mat Salleh', 'Hang Tuah'],
                    datasets: [{
                        data: [medalData.aki.total, medalData.rentap.total, medalData["mat-salleh"].total, medalData["hang-tuah"].total],
                        backgroundColor: [
                            'rgba(255, 215, 0, 0.8)',
                            'rgba(40, 167, 69, 0.8)',
                            'rgba(0, 123, 255, 0.8)',
                            'rgba(220, 53, 69, 0.8)'
                        ],
                        borderColor: [
                            'rgb(255, 215, 0)',
                            'rgb(40, 167, 69)',
                            'rgb(0, 123, 255)',
                            'rgb(220, 53, 69)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                usePointStyle: true,
                                font: {
                                    size: 12,
                                    weight: 'bold'
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const team = context.label;
                                    const total = context.raw;
                                    const teamData = medalData[team.toLowerCase().replace(' ', '-')];
                                    return `${team}: ${total} pingat (${teamData.gold}E, ${teamData.silver}P, ${teamData.bronze}G)`;
                                }
                            }
                        }
                    },
                    animation: {
                        duration: 2000,
                        easing: 'easeOutQuart'
                    }
                }
            });
        }

        // Load events based on filter
        function loadEvents(typeFilter, genderFilter) {
            const container = document.getElementById('events-container');
            container.innerHTML = '';
            
            let events = [];
            
            if (typeFilter === 'all') {
                events = [...eventsData.track, ...eventsData.field];
            } else if (typeFilter === 'track') {
                events = eventsData.track;
            } else if (typeFilter === 'field') {
                events = eventsData.field;
            }
            
            // Apply gender filter
            if (genderFilter !== 'all') {
                events = events.filter(event => event.gender === genderFilter);
            }
            
            // Display events
            events.forEach(event => {
                const eventCard = createEventCard(event);
                container.appendChild(eventCard);
            });
            
            // If no events found
            if (events.length === 0) {
                container.innerHTML = '<div class="col-12"><div class="alert alert-info">Tiada acara ditemui untuk penapisan yang dipilih.</div></div>';
            }
        }

        // Create event card
        function createEventCard(event) {
            const col = document.createElement('div');
            col.className = 'col-md-6 mb-4 fade-in';
            
            const card = document.createElement('div');
            card.className = 'card h-100';
            
            // Determine event type for styling
            const isTrack = eventsData.track.some(trackEvent => trackEvent.id === event.id);
            const eventType = isTrack ? 'track' : 'field';
            const eventTypeText = isTrack ? 'Balapan' : 'Padang';
            
            // Determine gender icon and text
            const genderIcon = event.gender === 'male' ? 'bi-gender-male' : 'bi-gender-female';
            const genderText = event.gender === 'male' ? 'Lelaki' : 'Perempuan';
            
            // Determine medal colors for top 3
            const medalColors = ['gold', 'silver', 'bronze'];
            
            // Build participants table
            let participantsHTML = '';
            event.participants.forEach((participant, index) => {
                const medalClass = index < 3 ? medalColors[index] : '';
                const medalIcon = index < 3 ? `<i class="bi bi-award-fill ${medalClass}"></i>` : '';
                
                // Get team badge
                let teamBadge = '';
                if (participant.team && participant.team !== 'unknown') {
                    const teamNames = {
                        'aki': 'AKI ANTANOM',
                        'rentap': 'RENTAP',
                        'mat-salleh': 'MAT SALLEH',
                        'hang-tuah': 'HANG TUAH'
                    };
                    const teamClass = {
                        'aki': 'aki-badge',
                        'rentap': 'rentap-badge',
                        'mat-salleh': 'mat-salleh-badge',
                        'hang-tuah': 'hang-tuah-badge'
                    };
                    
                    teamBadge = `<span class="team-badge ${teamClass[participant.team]}">${teamNames[participant.team]}</span>`;
                }
                
                participantsHTML += `
                    <tr>
                        <td class="align-middle">${medalIcon} ${participant.position}</td>
                        <td class="align-middle">${participant.name}</td>
                        <td class="align-middle fw-bold">${participant.result}</td>
                        <td class="align-middle">${teamBadge}</td>
                    </tr>
                `;
            });
            
            card.innerHTML = `
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <h5 class="card-title mb-0">${event.name}</h5>
                        <div>
                            <span class="event-type-badge me-2">${eventTypeText}</span>
                            <span class="badge bg-secondary"><i class="bi ${genderIcon}"></i> ${genderText}</span>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-sm table-striped">
                            <thead>
                                <tr>
                                    <th width="15%">Ked</th>
                                    <th>Nama Peserta</th>
                                    <th width="25%">Masa/Jarak</th>
                                    <th width="30%">Pasukan</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${participantsHTML}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
            
            col.appendChild(card);
            return col;
        }

        // Load top scorers table
        function loadTopScorers() {
            const tableBody = document.getElementById('top-scorers-table');
            tableBody.innerHTML = '';
            
            // Sort by points (descending), then gold, then silver, then bronze
            const sortedScorers = [...topScorers].sort((a, b) => {
                if (b.points !== a.points) return b.points - a.points;
                if (b.gold !== a.gold) return b.gold - a.gold;
                if (b.silver !== a.silver) return b.silver - a.silver;
                return b.bronze - a.bronze;
            });
            
            // Highlight Olahragawan dan Olahragawati
            const olahragawan = sortedScorers.find(s => s.gender === 'male' && s.points === Math.max(...sortedScorers.filter(s => s.gender === 'male').map(s => s.points)));
            const olahragawati = sortedScorers.find(s => s.gender === 'female' && s.points === Math.max(...sortedScorers.filter(s => s.gender === 'female').map(s => s.points)));
            
            sortedScorers.forEach((scorer, index) => {
                const row = document.createElement('tr');
                
                // Determine team badge
                const teamClass = {
                    'aki': 'aki-badge',
                    'rentap': 'rentap-badge',
                    'mat-salleh': 'mat-salleh-badge',
                    'hang-tuah': 'hang-tuah-badge'
                };
                
                const teamNames = {
                    'aki': 'AKI ANTANOM',
                    'rentap': 'RENTAP',
                    'mat-salleh': 'MAT SALLEH',
                    'hang-tuah': 'HANG TUAH'
                };
                
                // Medal icons
                const goldIcon = scorer.gold > 0 ? `<i class="bi bi-award-fill gold"></i> ${scorer.gold}` : '0';
                const silverIcon = scorer.silver > 0 ? `<i class="bi bi-award-fill silver"></i> ${scorer.silver}` : '0';
                const bronzeIcon = scorer.bronze > 0 ? `<i class="bi bi-award-fill bronze"></i> ${scorer.bronze}` : '0';
                
                // Highlight row for champions
                let rowClass = '';
                if ((scorer.gender === 'male' && scorer.name === olahragawan.name) || 
                    (scorer.gender === 'female' && scorer.name === olahragawati.name)) {
                    rowClass = 'table-warning';
                }
                
                row.className = rowClass;
                row.innerHTML = `
                    <td class="fw-bold">${index + 1}</td>
                    <td class="fw-bold">${scorer.name} 
                        ${scorer.name === olahragawan.name ? '<span class="badge bg-warning text-dark ms-2">Olahragawan</span>' : ''}
                        ${scorer.name === olahragawati.name ? '<span class="badge bg-warning text-dark ms-2">Olahragawati</span>' : ''}
                    </td>
                    <td>${scorer.gender === 'male' ? 'Lelaki' : 'Perempuan'}</td>
                    <td><span class="team-badge ${teamClass[scorer.team]}">${teamNames[scorer.team]}</span></td>
                    <td>${goldIcon}</td>
                    <td>${silverIcon}</td>
                    <td>${bronzeIcon}</td>
                    <td><strong class="highlight-number">${scorer.points}</strong></td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        // Set up event listeners
        function setupEventListeners() {
            // Event filter buttons
            document.querySelectorAll('.event-filter [data-filter]').forEach(button => {
                button.addEventListener('click', function() {
                    // Update active state
                    document.querySelectorAll('.event-filter [data-filter]').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    const filter = this.getAttribute('data-filter');
                    const genderFilter = document.querySelector('.event-filter [data-gender].active').getAttribute('data-gender');
                    
                    loadEvents(filter, genderFilter);
                });
            });
            
            // Gender filter buttons
            document.querySelectorAll('.event-filter [data-gender]').forEach(button => {
                button.addEventListener('click', function() {
                    // Update active state
                    document.querySelectorAll('.event-filter [data-gender]').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    const genderFilter = this.getAttribute('data-gender');
                    const typeFilter = document.querySelector('.event-filter [data-filter].active').getAttribute('data-filter');
                    
                    loadEvents(typeFilter, genderFilter);
                });
            });
            
            // Search button
            document.getElementById('searchButton').addEventListener('click', function() {
                const searchTerm = document.getElementById('searchInput').value.toLowerCase();
                
                if (!searchTerm) {
                    alert('Sila masukkan istilah carian.');
                    return;
                }
                
                // Search through events and participants
                let results = [];
                
                // Search in track events
                eventsData.track.forEach(event => {
                    // Check event name
                    if (event.name.toLowerCase().includes(searchTerm)) {
                        results.push({
                            type: 'Acara',
                            name: event.name,
                            details: `${event.gender === 'male' ? 'Lelaki' : 'Perempuan'} - Balapan`
                        });
                    }
                    
                    // Check participants
                    event.participants.forEach(participant => {
                        if (participant.name.toLowerCase().includes(searchTerm)) {
                            results.push({
                                type: 'Peserta',
                                name: participant.name,
                                details: `Acara: ${event.name}, Kedudukan: ${participant.position}, Pasukan: ${getTeamName(participant.team)}`
                            });
                        }
                    });
                });
                
                // Search in field events
                eventsData.field.forEach(event => {
                    // Check event name
                    if (event.name.toLowerCase().includes(searchTerm)) {
                        results.push({
                            type: 'Acara',
                            name: event.name,
                            details: `${event.gender === 'male' ? 'Lelaki' : 'Perempuan'} - Padang`
                        });
                    }
                    
                    // Check participants
                    event.participants.forEach(participant => {
                        if (participant.name.toLowerCase().includes(searchTerm)) {
                            results.push({
                                type: 'Peserta',
                                name: participant.name,
                                details: `Acara: ${event.name}, Kedudukan: ${participant.position}, Pasukan: ${getTeamName(participant.team)}`
                            });
                        }
                    });
                });
                
                // Display results
                const resultsContainer = document.getElementById('searchResults');
                const resultsList = document.getElementById('resultsList');
                
                resultsList.innerHTML = '';
                
                if (results.length === 0) {
                    resultsList.innerHTML = '<div class="alert alert-warning">Tiada hasil ditemui untuk carian anda.</div>';
                } else {
                    results.forEach(result => {
                        const resultItem = document.createElement('a');
                        resultItem.href = '#';
                        resultItem.className = 'list-group-item list-group-item-action';
                        resultItem.innerHTML = `
                            <div class="d-flex w-100 justify-content-between">
                                <h6 class="mb-1">${result.name}</h6>
                                <small class="text-muted">${result.type}</small>
                            </div>
                            <p class="mb-1">${result.details}</p>
                        `;
                        resultsList.appendChild(resultItem);
                    });
                }
                
                resultsContainer.style.display = 'block';
            });
            
            // Update event button
            document.getElementById('updateButton').addEventListener('click', function() {
                const event = document.getElementById('updateEvent').value;
                const participantName = document.getElementById('participantName').value;
                const participantResult = document.getElementById('participantResult').value;
                const participantPosition = document.getElementById('participantPosition').value;
                
                if (!event || !participantName || !participantResult || !participantPosition) {
                    alert('Sila isi semua bidang.');
                    return;
                }
                
                // In a real system, this would send data to a server
                alert(`Acara ${event} telah dikemaskini.\n\nPeserta: ${participantName}\nKedudukan: ${participantPosition}\nMasa/Jarak: ${participantResult}\n\nPerubahan telah disimpan.`);
                
                // Reset form
                document.getElementById('updateEvent').value = '';
                document.getElementById('participantName').value = '';
                document.getElementById('participantResult').value = '';
                document.getElementById('participantPosition').value = '1';
            });
        }

        // Set up medal card click handlers
        function setupMedalCardHandlers() {
            document.querySelectorAll('.medal-card').forEach(card => {
                card.addEventListener('click', function() {
                    const team = this.getAttribute('data-team');
                    const medal = this.getAttribute('data-medal');
                    
                    showMedalWinners(team, medal);
                });
            });
        }

        // Show medal winners in modal
        function showMedalWinners(team, medalType) {
            const modalTitle = document.getElementById('modalTitle');
            const modalContent = document.getElementById('modalContent');
            
            // Get team name
            const teamNames = {
                'aki': 'Aki Antanom',
                'rentap': 'Rentap',
                'mat-salleh': 'Mat Salleh',
                'hang-tuah': 'Hang Tuah'
            };
            
            // Get medal name
            const medalNames = {
                'gold': 'Emas',
                'silver': 'Perak',
                'bronze': 'Gangsa'
            };
            
            modalTitle.textContent = `Pemenang Pingat ${medalNames[medalType]} - ${teamNames[team]}`;
            
            // Find all winners for this team and medal type
            let winners = [];
            
            // Check track events
            eventsData.track.forEach(event => {
                event.participants.forEach(participant => {
                    if (participant.team === team) {
                        // Check if this participant won this medal type
                        // Gold = position 1, Silver = position 2, Bronze = position 3
                        if ((medalType === 'gold' && participant.position === 1) ||
                            (medalType === 'silver' && participant.position === 2) ||
                            (medalType === 'bronze' && participant.position === 3)) {
                            
                            winners.push({
                                name: participant.name,
                                event: event.name,
                                result: participant.result,
                                position: participant.position
                            });
                        }
                    }
                });
            });
            
            // Check field events
            eventsData.field.forEach(event => {
                event.participants.forEach(participant => {
                    if (participant.team === team) {
                        // Check if this participant won this medal type
                        if ((medalType === 'gold' && participant.position === 1) ||
                            (medalType === 'silver' && participant.position === 2) ||
                            (medalType === 'bronze' && participant.position === 3)) {
                            
                            winners.push({
                                name: participant.name,
                                event: event.name,
                                result: participant.result,
                                position: participant.position
                            });
                        }
                    }
                });
            });
            
            // Build content
            let contentHTML = '';
            
            if (winners.length === 0) {
                contentHTML = `<div class="alert alert-info">Tiada pemenang ${medalNames[medalType]} ditemui untuk pasukan ${teamNames[team]}.</div>`;
            } else {
                contentHTML = `
                    <p class="fs-5">Pasukan <strong>${teamNames[team]}</strong> telah memenangi <strong>${winners.length}</strong> pingat ${medalNames[medalType]}:</p>
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead class="table-${medalType === 'gold' ? 'warning' : medalType === 'silver' ? 'secondary' : 'light'}">
                                <tr>
                                    <th>#</th>
                                    <th>Nama Peserta</th>
                                    <th>Acara</th>
                                    <th>Keputusan</th>
                                </tr>
                            </thead>
                            <tbody>
                `;
                
                winners.forEach((winner, index) => {
                    const medalIcon = medalType === 'gold' ? '<i class="bi bi-award-fill gold"></i>' :
                                      medalType === 'silver' ? '<i class="bi bi-award-fill silver"></i>' :
                                      '<i class="bi bi-award-fill bronze"></i>';
                    
                    contentHTML += `
                        <tr>
                            <td class="align-middle">${medalIcon} ${index + 1}</td>
                            <td class="align-middle fw-bold">${winner.name}</td>
                            <td class="align-middle">${winner.event}</td>
                            <td class="align-middle">${winner.result}</td>
                        </tr>
                    `;
                });
                
                contentHTML += `
                            </tbody>
                        </table>
                    </div>
                `;
            }
            
            modalContent.innerHTML = contentHTML;
            
            // Show modal
            const modal = new bootstrap.Modal(document.getElementById('winnersModal'));
            modal.show();
        }

        // Get team name from team code
        function getTeamName(teamCode) {
            const teamNames = {
                'aki': 'AKI ANTANOM',
                'rentap': 'RENTAP',
                'mat-salleh': 'MAT SALLEH',
                'hang-tuah': 'HANG TUAH',
                'unknown': 'Tidak Diketahui'
            };
            
            return teamNames[teamCode] || teamCode;
        }

        // Initialize dark mode
        function initDarkMode() {
            const darkModeToggle = document.getElementById('darkModeToggle');
            const darkModeIcon = darkModeToggle.querySelector('i');
            
            // Check for saved theme preference
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                darkModeIcon.className = 'bi bi-sun';
                darkModeToggle.innerHTML = '<i class="bi bi-sun"></i> Mode Cerah';
                darkModeToggle.classList.remove('btn-outline-primary');
                darkModeToggle.classList.add('btn-outline-warning');
            }
            
            darkModeToggle.addEventListener('click', function() {
                document.body.classList.toggle('dark-mode');
                
                if (document.body.classList.contains('dark-mode')) {
                    darkModeIcon.className = 'bi bi-sun';
                    darkModeToggle.innerHTML = '<i class="bi bi-sun"></i> Mode Cerah';
                    darkModeToggle.classList.remove('btn-outline-primary');
                    darkModeToggle.classList.add('btn-outline-warning');
                    localStorage.setItem('theme', 'dark');
                } else {
                    darkModeIcon.className = 'bi bi-moon';
                    darkModeToggle.innerHTML = '<i class="bi bi-moon"></i> Mode Gelap';
                    darkModeToggle.classList.remove('btn-outline-warning');
                    darkModeToggle.classList.add('btn-outline-primary');
                    localStorage.setItem('theme', 'light');
                }
            });
        }
    </script>
</body>
</html>
